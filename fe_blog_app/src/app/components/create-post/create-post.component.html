<div class="create-post-container">
  <div class="create-post-card">
    <div class="create-post-header">
      <div class="user-avatar">
        U
      </div>
      <input 
        type="text" 
        placeholder="What's on your mind?" 
        class="post-input-preview"
        readonly
        (click)="openFullEditor()"
      />
    </div>
    
    <div class="post-type-selector">
      <button class="post-type-btn active" type="button">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M8 4.5a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4.5z"/>
        </svg>
        Media
      </button>
      
      <button class="post-type-btn" type="button">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L1.5 14.5V2zm3.5 1.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-9zm0 2.5a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-6a.5.5 0 0 0-.5-.5h-9z"/>
        </svg>
        Link
      </button>
      
      <button class="post-type-btn" type="button">
        <svg width="16" height="16" viewBox="0 0 16 16">
          <path fill="currentColor" d="M8 4.5a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4.5z"/>
        </svg>
        Poll
      </button>
      
      <button class="btn btn-primary create-post-btn" (click)="openFullEditor()">
        + CREATE POST
      </button>
    </div>
  </div>

  <!-- Full editor modal (show when fullEditorOpen is true) -->
  <div class="full-editor-modal" *ngIf="fullEditorOpen">
    <div class="full-editor-content">
      <div class="editor-header">
        <h2>Create a post</h2>
        <button class="close-btn" (click)="closeFullEditor()">Ã—</button>
      </div>
      
      <form (ngSubmit)="onSubmit()" #postForm="ngForm">
        <div class="form-group">
          <label for="subreddit">Choose a community</label>
          <select 
            id="subreddit" 
            name="subreddit" 
            [(ngModel)]="post.subredditName" 
            required 
            class="form-select"
          >
            <option value="" disabled>Select a subreddit</option>
            <option *ngFor="let subreddit of subreddits" [value]="subreddit.name">
              r/{{ subreddit.name }}
            </option>
          </select>
        </div>

        <div class="form-group title-group">
          <input
            type="text"
            id="title"
            name="title"
            placeholder="Title"
            [(ngModel)]="post.title"
            required
            maxlength="300"
            class="form-input title-input"
            #title="ngModel"
          />
          <div class="char-count">{{ post.title.length }}/300</div>
        </div>

        <div class="form-group">
          <textarea
            id="content"
            name="content"
            placeholder="Text (optional)"
            [(ngModel)]="post.content"
            class="form-textarea"
            rows="6"
          ></textarea>
        </div>

        <div class="form-group">
          <input
            type="url"
            id="url"
            name="url"
            placeholder="URL (optional)"
            [(ngModel)]="post.url"
            class="form-input"
          />
        </div>

        <div *ngIf="error" class="error-message">
          {{ error }}
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-outline" (click)="closeFullEditor()">
            Cancel
          </button>
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="loading || postForm.invalid"
          >
            <span *ngIf="loading">Creating...</span>
            <span *ngIf="!loading">Post</span>
          </button>
        </div>
      </form>
    </div>
    <div class="modal-backdrop" (click)="closeFullEditor()"></div>
  </div>
</div>